
<!DOCTYPE html>
<html lang="es-es">
<head>

  
  <meta charset="UTF-8">
  <title>
    Detectando movimiento con opencv | avances123
  </title>


  
  <meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1,initial-scale=1">

  
  <link rel="canonical" href="http://blog.fabio.xyz/post/detectando-movimiento-con-opencv/"/>

  
  <link rel="stylesheet" href="http://blog.fabio.xyz/css/sanitize.css">
  <link rel="stylesheet" href="http://blog.fabio.xyz/css/responsive.css">
  <link rel="stylesheet" href="http://blog.fabio.xyz/css/highlight_monokai.css">
  <link rel="stylesheet" href="http://blog.fabio.xyz/css/theme.css">
  <link rel="stylesheet" href="http://blog.fabio.xyz/css/custom.css">
  
  
  <link href="http://blog.fabio.xyz/index.xml" rel="alternate" type="application/rss+xml" title="avances123" />
  <link href="http://blog.fabio.xyz/index.xml" rel="feed" type="application/rss+xml" title="avances123" />

  
  


</head>



<body>
<div class="container">

  
  <header role="banner">
    <div class="row gutters">
      <div id="site-title" class="col span_6">
        <h1><a href="http://blog.fabio.xyz/">avances123</a></h1>
        <h2>Ahora es cuando</h2>
      </div>
      <div id="social" class="col span_6">
        <ul>
          <li><a href="https://twitter.com/avances123" target="_blank">Twitter</a></li>
          
          <li><a href="https://github.com/avances123" target="_blank">GitHub</a></li>
          <li><a href="http://blog.fabio.xyz/index.xml" type="application/rss+xml" target="_blank">RSS</a></li>
        </ul>
      </div>
    </div>
  </header>


  
  <main id="single" role="main">
    <div class="article-header">
      <h1>Detectando movimiento con opencv</h1>
      <div class="meta">
        Apr 4, 2015 &nbsp;
        
      </div>
    </div>
    <article>
      

<h1 id="detectando-los-movimientos-de-una-serpiente:4fc87379e9658fb197b42cdf901960cf">Detectando los movimientos de una serpiente</h1>

<h2 id="introduccion:4fc87379e9658fb197b42cdf901960cf">Introduccion</h2>

<p>Me he pillao una serpiente, eso es asi, es una <a href="http://es.wikipedia.org/wiki/Thamnophis_sirtalis">Thamnophis Sirtalis</a>. Lleva en su terrario 3 dias y aun esta muy asustada, el caso es que se me ocurrio una de mis frikadas con este asunto, es bastante sencilla.</p>

<p>Tambien me he pillado un <a href="http://www.hardkernel.com/main/products/prdt_info.php">odroid C1</a>. Lo tendre encendido siempre, y lo uso como servidor casero, para la VPN, para el torrent, lo tipico.</p>

<h2 id="la-vida-de-json:4fc87379e9658fb197b42cdf901960cf">La vida de Json</h2>

<p>Json, como se llama la culebra, esta mucho tiempo a solas, supongo que para su felicidad. El caso es que yo lo quiero mucho mas que el a mi, y lo quiero ver, asi que he montado un sistema con la <a href="http://www.trust.com/en/all-products/17676-elight-full-hd-1080p-webcam">webcam</a> y el <a href="http://www.hardkernel.com/main/products/prdt_info.php">odroid</a>, que tira fotos cada minuto, y las deja un directorio, la ultima de ellas, la servire con el apache del odroid y asi tengo el terrario controlado.</p>

<p>Existe un programa llamado fswebcam (esta en los repos de ubuntu), que sirve precisamente para esto, tira la foto y la guarda, no hay mucho mas.</p>

<pre><code class="language-bash">#!/bin/bash

cd /home/odroid/serpiente/
DATE=$(date +&quot;%Y-%m-%d_%H%M&quot;)
fswebcam -v -r 800x640  -D 3 -S 4 $DATE.jpg
ln -fs $(ls -1 2015* | tail -n1) current.jpg
</code></pre>

<p>Este script es una chapuza y lo que querais, pero bueno la idea es simple, la ultima linea hace un link simbolico de la ultima foto a &ldquo;current.jpg&rdquo;.</p>

<p>Este script lo ponemos en el cron del odroid para que se ejecute cada minuto.</p>

<pre><code>* * * * * /home/odroid/timelapse-webcam.sh 2&gt;&amp;1 &gt;&gt;/tmp/timelapse.log
</code></pre>

<p>Faltaria hacer un virtualhost en nuestro apache para servir esta carpeta y currarte si quieres un html para mostrar current.jpg algo bonito.Yo solo sirvo la imagen y me sirve para verla desde el movil, podeis <a href="http://casa.fabio.xyz/serpiente/current.jpg">verla en tiempo real</a></p>

<h2 id="detectando-movimiento:4fc87379e9658fb197b42cdf901960cf">Detectando movimiento</h2>

<p>Estos primeros dias , la culebra esta muy asustada, tiene un tronco hueco donde poderse esconder y alli pasa el 95% de su tiempo, como es rollazo estar mirando a ver que produce, he pensado en aprender algo sobre la tipico problema de detector de movimiento, hacer algo asi, y que me avise si sale del tronco o si bebe agua, esa es la idea.</p>

<p>Segun <a href="https://blog.cedric.ws/opencv-simple-motion-detection">he leido</a>, para detectar el movimiento, usaremos la tecnica &ldquo;Differential Images&rdquo; que consiste en restar una imagen a otra anterior</p>

      
      
      
    </article>
    
 <aside><div id="disqus_thread"></div></aside> 

<script type="text/javascript">
     
    var disqus_shortname = 'avances123';

     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

  </main>
  
  <nav class="pagination-single">
    
      <span class="previous">&larr; <a href="http://blog.fabio.xyz/post/full-text-search-postgresql/" rel="prev">Busquedas de texto en postgresql</a></span>
    
    
      <span class="next"><a href="http://blog.fabio.xyz/post/tablas%20hash%20en%20C,Javascript%20y%20Python/" rel="next">Tablas hash en C,Javascript y Python</a> &rarr;</span>
    
  </nav>


  
  <footer role="contentinfo">
    <div style="text-align:center;">
      <img src="http://blog.fabio.xyz/images/profile.png" width="64" height="64"><br>
      Written by Fabio Rueda
    </div>
  </footer>


</div>

<script src="http://blog.fabio.xyz/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-XXXXXXXX-X', 'auto');
	ga('send', 'pageview');
</script>

</body>
</html>

