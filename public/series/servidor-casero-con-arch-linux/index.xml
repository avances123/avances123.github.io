<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Servidor casero con Arch Linux on avances123</title>
    <link>http://blog.fabio.xyz/series/servidor-casero-con-arch-linux/</link>
    <description>Recent content in Servidor casero con Arch Linux on avances123</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>es-es</language>
    <lastBuildDate>Sat, 19 Mar 2016 10:30:57 +0100</lastBuildDate>
    <atom:link href="http://blog.fabio.xyz/series/servidor-casero-con-arch-linux/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Introduccion, que tenia antes y que he comprado</title>
      <link>http://blog.fabio.xyz/series/arch-homeserver/de-raspberry-pi-a-hp-proliant-microserver/</link>
      <pubDate>Sat, 19 Mar 2016 10:30:57 +0100</pubDate>
      
      <guid>http://blog.fabio.xyz/series/arch-homeserver/de-raspberry-pi-a-hp-proliant-microserver/</guid>
      <description>

&lt;h2 id=&#34;antecedentes:10d8aa81d13021669fdcd5a46901e0c0&#34;&gt;Antecedentes&lt;/h2&gt;

&lt;p&gt;Bueno pues yo tenia en mi casa una raspberry pi, para hacer de media center y algun servicio de red mas, la tipica raspberry con un disco duro enchufado por usb.&lt;/p&gt;

&lt;p&gt;Todo iba genial como muchos que la teneis en casa sabreis, mis pegas eran totalmente menores, que era ARM y que era ubuntu, llevo 1 a単o ahora que me he cambiado a Archlinux como sistema operativo principal y aunque he usado ubuntu durante a単os, queria cambiarme a arch linux, por supuesto muchisimo de lo que contare aqui funciona en &lt;a href=&#34;https://archlinuxarm.org/&#34;&gt;Archlinux ARM&lt;/a&gt;, para vuestras raspberrys, odroids y demas.&lt;/p&gt;

&lt;h2 id=&#34;un-servidor-hp-en-casa:10d8aa81d13021669fdcd5a46901e0c0&#34;&gt;Un servidor hp en casa&lt;/h2&gt;

&lt;p&gt;Por la indicacion de un compa単ero del que siempre confio en cuanto a compras de tecnologia, me comento que habia un servidor casero muy barato, realmente son 200 euros, (4 veces mas que la pi), pero realmente era la posibilidad de tener un servidor &lt;em&gt;empresarial&lt;/em&gt; en casa. Es el &lt;a href=&#34;http://www8.hp.com/es/es/products/proliant-servers/product-detail.html?oid=5379860#!tab=specs&#34;&gt;HP Proliant Microserver gen8&lt;/a&gt;, supongo que han sacado otra version mas nueva y esta aun la venden en amazon, pero por ese precio me parecio muy barato. Gasta mas que la pi, pero no tengo que tener el disco duro enchufao ahi con cables por usb 2.0 y asi podria seguir justificandome un rato mas, en general digamos que es un salto mas, en potencia y en gasto como es normal.&lt;/p&gt;

&lt;p&gt;El servidor esta muy bien, tiene una bios muy pro, no hace nada de ruido y diria que hasta es bonito, tiene dos tarjetas de red, y otra dedicada para su gestion remota.&lt;/p&gt;

&lt;h2 id=&#34;montando-los-discos:10d8aa81d13021669fdcd5a46901e0c0&#34;&gt;Montando los discos&lt;/h2&gt;

&lt;p&gt;Bueno como muchos de vosotros, yo tengo en mi casa varios discos cada uno de su padre y de su madre, uno que he robado de un pc viejo, otro que me he comprado, otro que me lo dio mi hermano, etc. Esta maquina tiene cuatro bahias para discos duros&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://blog.fabio.xyz/images/proliant_1.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Justo tenia 4 asi que los 4 para dentro, son de tama単o distintos y aunque este servidor tiene controladora RAID, yo los pinche y luego en el Arch ya los gestionaria. No se pueden pinchar en caliente, asi que hay que hacerlo con el servidor apagado, y una cosa que tiene tener un servidor mas empresarial, es que tardan en arrancar la vida, asi que pensaroslo bien!.&lt;/p&gt;

&lt;h2 id=&#34;montando-el-so:10d8aa81d13021669fdcd5a46901e0c0&#34;&gt;Montando el SO&lt;/h2&gt;

&lt;p&gt;Para el sistema operativo, correria en un usb para no tener el sistema en ninguno de mis cuatro discos, y dedicarlos a hacer mantener los datos, sin tener el sistema entre ellos &lt;em&gt;molestando&lt;/em&gt;. Para montar un arch linux en un usb, seria del genero tonto documentar cosas que estan en la estupendisima &lt;a href=&#34;https://wiki.archlinux.org/index.php/Installing_Arch_Linux_on_a_USB_key&#34;&gt;wiki&lt;/a&gt;. Pero bueno en general lo interesante de este paso es saber que el sistema esta en un usb, el usb tiene una escritura reducida asi que hay que minimizarla al maximo, en mi caso sacaria la particion &lt;code&gt;/var&lt;/code&gt; y la &lt;code&gt;/home&lt;/code&gt; a los discos de las bahias, y asi tendria el pincho usb sin casi escritura.&lt;/p&gt;

&lt;p&gt;Sobre la configuracion del sistema operativo pues hablare constantemente en esta serie, pero sobre la &lt;a href=&#34;https://wiki.archlinux.org/index.php/Installation_guide&#34;&gt;instalacion desde cero&lt;/a&gt; de arch, no voy a poner nada ya que creo que no aporta nada de valor.&lt;/p&gt;

&lt;h3 id=&#34;kernel:10d8aa81d13021669fdcd5a46901e0c0&#34;&gt;kernel&lt;/h3&gt;

&lt;p&gt;Una cosa importante en este paso, instalar el kernel lts, que tiene menos actualizaciones, y bloquearlo, no queremos que nuestro servidor este cambiando de kernel tan tranquilamente, funciona y no hace falta actualizarlo, recordad que buscamos la estabilidad aqui.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ sudo pacman -S linux-lts
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;# /etc/pacman.conf

...
IgnorePkg = linux-lts linux-lts-headers
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Con esto conseguimos tener dos kernels en nuestro grub, el paquete linux, con el kernel actualizandose a menudo , y el paquete linux-lts, que es un kernel mas estable y ademas bloqueado, lo actualiaremos cuando &lt;strong&gt;necesitemos&lt;/strong&gt;.Este sera nuestro kernel por defecto en el arranque.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Montando el almacenamiento con btrfs</title>
      <link>http://blog.fabio.xyz/series/arch-homeserver/almacenamiento-con-btrfs/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>http://blog.fabio.xyz/series/arch-homeserver/almacenamiento-con-btrfs/</guid>
      <description>

&lt;h2 id=&#34;configurar-el-almacenamiento-con-btrfs:f5776ce002083f17f7a8f8f37568a092&#34;&gt;Configurar el almacenamiento con btrfs&lt;/h2&gt;

&lt;p&gt;El siguiente paso sera configurar el almacenamiento, ya tenemos enchufados los discos y los reconoce el Linux&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;fabio@fa-server:~ $ sudo fdisk -l | grep Disco
Disco /dev/sdc: 465,8 GiB, 500107862016 bytes, 976773168 sectores
Disco /dev/sdb: 698,7 GiB, 750156374016 bytes, 1465149168 sectores
Disco /dev/sda: 2,7 TiB, 3000592982016 bytes, 5860533168 sectores
Disco /dev/sde: 465,8 GiB, 500107862016 bytes, 976773168 sectores
Disco /dev/sdd: 14,7 GiB, 15733161984 bytes, 30728832 sectores
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Los discos &lt;code&gt;/dev/sd[a,b,c,e]&lt;/code&gt; son los discos de 3&amp;rsquo;5 que he pinchado en las bahias y &lt;code&gt;/dev/sdd&lt;/code&gt; es el pincho usb donde tenemos nuestro sistema. Ahora vamos a configurar btrfs para tener un solo sistema de ficheros y ya a partir de ese btrfs, crearemos volumenes y montaremos a nuestro gusto. He intentado estudiar y hacerlo lo mejor posible segun he leido en la wiki de arch y mi propia experiencia.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>